{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "file:./OsttraExchangeEvent.json",
  "title": "Osttra Exchange Event schema",
  "description": "Version 15.1 last updated 2026-01-27",
  "type": "object",
  "required": [
    "exchangeEvent"
  ],
  "properties": {
    "exchangeEvent": {
      "description": "The root container for the exchange event details, encompassing platform source and specific event types.",
      "$ref": "#/$defs/ExchangeEvent"
    }
  },
  "$defs": {
    "ExchangeEvent": {
      "type": "object",
      "description": "Defines the core structure of an exchange event, requiring a source platform and either a request or a response payload.",
      "required": [
        "sourcePlatform"
      ],
      "properties": {
        "sourcePlatform": {
          "description": "A list of platforms originating the event. Must contain at least one source platform reference.",
          "type": "array",
          "items": {
            "$ref": "./OsttraWrapper.json#/$defs/SourcePlatform"
          },
          "minItems": 1
        },
        "cashflowValuationRequest": {
          "description": "Details for requesting a valuation on specific cashflows related to one or more trades.",
          "$ref": "#/$defs/CashflowValuationRequest"
        },
        "eventResponse": {
          "description": "The response payload returned by the exchange after processing an event or request.",
          "$ref": "#/$defs/EventResponse"
        }
      },
      "oneOf": [
        {
          "required": [
            "cashflowValuationRequest"
          ]
        },
        {
          "required": [
            "eventResponse"
          ]
        }
      ]
    },
    "CashflowValuationRequest": {
      "type": "object",
      "description": "Parameters for a specific request to calculate or retrieve cashflow valuations.",
      "additionalProperties": false,
      "properties": {
        "tradeId": {
          "description": "An array of unique trade identifiers for which the valuation is being requested.",
          "type": "array",
          "items": {
            "type": "string"
          },
          "minItems": 1
        },
        "sourcePlatform": {
          "description": "The specific platform identifier associated with this valuation request.",
          "type": "string"
        }
      }
    },
    "EventResponse": {
      "type": "object",
      "description": "Standardized response object providing acknowledgment, status, and error details.",
      "additionalProperties": true,
      "properties": {
        "ackId": {
          "description": "A unique acknowledgment identifier generated by the system to track the response.",
          "type": "string"
        },
        "status": {
          "description": "The current state of the event processing (e.g., SUCCESS, FAILURE, PENDING).",
          "type": "string"
        },
        "errorCode": {
          "description": "A specific error code if the processing was unsuccessful.",
          "type": "string"
        },
        "errorMessage": {
          "description": "A human-readable explanation of the error or status message.",
          "type": "string"
        },
        "receiptTimeStamp": {
          "description": "The timestamp when the event was initially received by the exchange.",
          "type": "string",
          "format": "date-time"
        },
        "submissionTimeStamp": {
          "description": "The timestamp when the response was generated or submitted back to the requester.",
          "type": "string",
          "format": "date-time"
        }
      }
    }
  }
}